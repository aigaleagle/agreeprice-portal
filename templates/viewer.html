<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Product Table</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f9f9f9;
      color: #333;
      margin: 0;
      padding: 0 20px;
      transition: background 0.3s, color 0.3s;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #4CAF50;
      color: white;
      padding: 15px 20px;
      border-radius: 0 0 8px 8px;
    }
    header h1 { margin: 0; }
    header button {
      background: transparent;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
    }
    main {
      max-width: 800px;
      margin: 40px auto;
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    label { font-weight: bold; }
    input[type="date"] {
      padding: 5px 10px;
      margin-left: 10px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    table th {
      background: #4CAF50;
      color: white;
      padding: 10px;
      text-align: left;
    }
    table td {
      padding: 10px;
      border-bottom: 1px solid #ddd;
    }
    table tr:nth-child(even) {
      background: #f2f2f2;
    }
    aside {
      position: fixed;
      top: 80px; right: 20px;
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 20px;
      width: 220px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    }
    .hidden { display: none; }
    .toggle-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 15px;
    }
    .switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 26px;
    }
    .switch input {
      opacity: 0;
      width: 0; height: 0;
    }
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0; left: 0; right: 0; bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 34px;
    }
    .slider:before {
      position: absolute;
      content: "";
      height: 20px; width: 20px;
      left: 3px; bottom: 3px;
      background: white;
      transition: .4s;
      border-radius: 50%;
    }
    input:checked + .slider {
      background-color: #4CAF50;
    }
    input:checked + .slider:before {
      transform: translateX(24px);
    }

    /* Dark theme */
    body.dark { background: #121212; color: #eee; }
    body.dark main { background: #1e1e1e; }
    body.dark header { background: #333; }
    body.dark table th { background: #333; }
    body.dark table tr:nth-child(even) { background: #222; }
    body.dark aside { background: #1e1e1e; border-color: #555; }




  /* ... your existing styles ... */
  input[type="date"] {
    padding: 5px 10px;
    margin-left: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
  }

  body.dark input[type="date"] {
    background: #333;
    color: #eee;
    border: 1px solid #555;
  }



  </style>
</head>
<body>
  <header>
    <h1 id="title">Product Table</h1>
    <button onclick="toggleSettings()">‚öôÔ∏è</button>
  </header>

  <main>
    <label id="selectDateLabel">Select Date:</label>
    <input type="date" id="datePicker" value="{{ today }}" onchange="loadProducts()">
    <table>
      <thead>
        <tr>
          <th id="thProduct">Product</th>
          <th id="thQuantity">Quantity</th>
          <th id="thPrice">Price</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </main>

  <aside id="settingsPanel" class="hidden">
    <button onclick="toggleSettings()">‚úñ</button>
    <h2 id="settingsTitle">Settings</h2>
    <div id="profile"><p id="profileName">Name: User</p></div>
    <div class="toggle-container">
      <span id="themeLabel">Dark Theme</span>
      <label class="switch">
        <input type="checkbox" id="themeToggle" onchange="toggleTheme()">
        <span class="slider"></span>
      </label>
    </div>
    <div class="toggle-container">
      <span id="langLabel">‡≤ï‡≤®‡≥ç‡≤®‡≤°</span>
      <label class="switch">
        <input type="checkbox" id="langToggle" onchange="switchLanguage()">
        <span class="slider"></span>
      </label>
    </div>
  </aside>

  <script>
    let currentLang = localStorage.getItem('lang') || 'en';

   const productNames = {
  // üåæ Food Grains
  Rice: { kn: "‡≤Ö‡≤ï‡≥ç‡≤ï‡≤ø", en: "Rice" },
  Wheat: { kn: "‡≤ó‡≥ã‡≤ß‡≤ø", en: "Wheat" },
  Maize: { kn: "‡≤Æ‡≤ï‡≥ç‡≤ï‡≤≥ ‡≤ú‡≥ã‡≤≥", en: "Maize" },
  Barley: { kn: "‡≤ú‡≥å", en: "Barley" },
  Millet: { kn: "‡≤∏‡≤ø‡≤∞‡≤ø‡≤ß‡≤æ‡≤®‡≥ç‡≤Ø (‡≤¨‡≤æ‡≤ú‡≥ç‡≤∞‡≤æ, ‡≤∞‡≤æ‡≤ó‡≤ø, ‡≤ú‡≥ã‡≤≥)", en: "Millet" },

  // ü´ò Pulses
  Chickpeas: { kn: "‡≤ï‡≤°‡≤≤‡≥Ü‡≤ï‡≤æ‡≤Ø‡≤ø (‡≤ö‡≤®‡≤æ)", en: "Chickpeas" },
  "Green Gram": { kn: "‡≤π‡≥Å‡≤°‡≥Å‡≤ó‡≤∞‡≥Ü (‡≤Æ‡≥Ç‡≤Ç‡≤ó‡≥ç)", en: "Green Gram" },
  "Black Gram": { kn: "‡≤â‡≤¶‡≥ç‡≤¶‡≤ø‡≤® bele (‡≤â‡≤∞‡≤¶‡≥ç)", en: "Black Gram" },
  Lentils: { kn: "‡≤Æ‡≤∏‡≥Ç‡≤∞ bele", en: "Lentils" },
  "Pigeon Pea": { kn: "‡≤§‡≥Å‡≥ç‡≤µ‡≤∞ bele (‡≤Ö‡≤∞‡≤π‡≤∞‡≥ç)", en: "Pigeon Pea" },

  // üßÖ Vegetables
  Potato: { kn: "‡≤Ü‡≤≤‡≥Ç‡≤ó‡≤°‡≥ç‡≤°‡≥Ü", en: "Potato" },
  Onion: { kn: "‡≤à‡≤∞‡≤≥‡≥ç‡≤≥‡≤ø", en: "Onion" },
  Tomato: { kn: "‡≤ü‡≥ä‡≤Æ‡≥á‡≤ü‡≥ã", en: "Tomato" },
  Brinjal: { kn: "‡≤¨‡≤¶‡≤®‡≥Ü‡≤ï‡≤æ‡≤Ø‡≤ø", en: "Brinjal" },
  Spinach: { kn: "‡≤™‡≤æ‡≤≤‡≤ï‡≥ç (‡≤∏‡≥ä‡≤™‡≥ç‡≤™‡≥Å)", en: "Spinach" },
  Cauliflower: { kn: "‡≤π‡≥Ç‡≤ï‡≥ã‡≤∏‡≥Å", en: "Cauliflower" },
  Cabbage: { kn: "‡≤é‡≤≤‡≥Ü‡≤ï‡≥ã‡≤∏‡≥Å", en: "Cabbage" },
  Okra: { kn: "‡≤¨‡≥Ü‡≤Ç‡≤°‡≥Ü‡≤ï‡≤æ‡≤Ø‡≤ø", en: "Okra" },

  // üçé Fruits
  Mango: { kn: "‡≤Æ‡≤æ‡≤µ‡≥Å", en: "Mango" },
  Banana: { kn: "‡≤¨‡≤æ‡≤≥‡≥Ü‡≤π‡≤£‡≥ç‡≤£‡≥Å", en: "Banana" },
  Apple: { kn: "‡≤∏‡≥á‡≤¨‡≥Å", en: "Apple" },
  Grapes: { kn: "‡≤¶‡≥ç‡≤∞‡≤æ‡≤ï‡≥ç‡≤∑‡≤ø", en: "Grapes" },
  Orange: { kn: "‡≤ï‡≤ø‡≤§‡≥ç‡≤§‡≤≥‡≥Ü", en: "Orange" },
  Papaya: { kn: "‡≤™‡≤™‡≥ç‡≤™‡≤æ‡≤Ø‡≤ø", en: "Papaya" },
  Guava: { kn: "‡≤™‡≥á‡≤∞‡≤≤‡≥Ü", en: "Guava" },
  Pomegranate: { kn: "‡≤¶‡≤æ‡≤≥‡≤ø‡≤Ç‡≤¨‡≥Ü", en: "Pomegranate" },

  // ü´í Oilseeds & Cash Crops
  Groundnut: { kn: "‡≤®‡≥Ü‡≤≤‡≤ó‡≤°‡≤≤‡≥Ü", en: "Groundnut" },
  Mustard: { kn: "‡≤∏‡≤æ‡≤∏‡≤ø‡≤µ‡≥Ü", en: "Mustard" },
  Soybean: { kn: "‡≤∏‡≥ã‡≤Ø‡≤æ‡≤¨‡≥Ä‡≤®‡≥ç", en: "Soybean" },
  Sunflower: { kn: "‡≤∏‡≥Ç‡≤∞‡≥ç‡≤Ø‡≤ï‡≤æ‡≤Ç‡≤§‡≤ø", en: "Sunflower" },
  Cotton: { kn: "‡≤π‡≤§‡≥ç‡≤§‡≤ø", en: "Cotton" },
  Sugarcane: { kn: "‡≤â‡≤™‡≥ç‡≤™‡≥Å‡≤∏‡≤ï‡≥ç‡≤ï‡≤∞‡≥Ü", en: "Sugarcane" },
  Tea: { kn: "‡≤ü‡≥Ä", en: "Tea" },
  Coffee: { kn: "‡≤ï‡≤æ‡≤´‡≤ø", en: "Coffee" },
  "Areca Nut": { kn: "‡≤Ö‡≤°‡≤ø‡≤ï‡≥Ü", en: "Areca Nut" },
  Pepper: { kn: "‡≤Æ‡≥Ü‡≤£‡≤∏‡≥Å", en: "Pepper" },
  Cardamom: { kn: "‡≤é‡≤≤‡≤ï‡≥ç‡≤ï‡≤ø", en: "Cardamom" },

  // üåø Spices
  "Black Pepper": { kn: "‡≤ï‡≤™‡≥ç‡≤™‡≥Å ‡≤Æ‡≥Ü‡≤£‡≤∏‡≥Å", en: "Black Pepper" },
  Turmeric: { kn: "‡≤Ö‡≤∞‡≤ø‡≤∂‡≤ø‡≤®", en: "Turmeric" },
  Ginger: { kn: "‡≤∂‡≥Å‡≤Ç‡≤†‡≤ø", en: "Ginger" },
  Garlic: { kn: "‡≤¨‡≥Ü‡≤≥‡≥ç‡≤≥‡≥Å‡≤≥‡≥ç‡≤≥‡≤ø", en: "Garlic" },
  Cloves: { kn: "‡≤≤‡≤µ‡≤Ç‡≤ó", en: "Cloves" },
  Cinnamon: { kn: "‡≤¶‡≤æ‡≤≤‡≥ç‡≤ö‡≤ø‡≤®‡≥ç‡≤®‡≤ø", en: "Cinnamon" },
  Cumin: { kn: "‡≤ú‡≥Ä‡≤∞‡≤ø‡≤ó‡≥Ü", en: "Cumin" },
  Coriander: { kn: "‡≤ï‡≥ã‡≤ü‡≤Ç‡≤¨‡≤∞‡≤ø", en: "Coriander" }
};


    const translations = {
      noRecords: { en: "No records found", kn: "‡≤¶‡≤æ‡≤ñ‡≤≤‡≥Ü‡≤ó‡≤≥‡≥Å ‡≤ï‡≤Ç‡≤°‡≥Å‡≤¨‡≤Ç‡≤¶‡≤ø‡≤≤‡≥ç‡≤≤" },
      productHeader: { en: "Product", kn: "‡≤â‡≤§‡≥ç‡≤™‡≤®‡≥ç‡≤®" },
      quantityHeader: { en: "Quantity", kn: "‡≤™‡≥ç‡≤∞‡≤Æ‡≤æ‡≤£" },
      priceHeader: { en: "Price", kn: "‡≤¨‡≥Ü‡≤≤‡≥Ü" },
      selectDate: { en: "Select Date:", kn: "‡≤¶‡≤ø‡≤®‡≤æ‡≤Ç‡≤ï ‡≤Ü‡≤Ø‡≥ç‡≤ï‡≥Ü‡≤Æ‡≤æ‡≤°‡≤ø:" },
      settingsTitle: { en: "Settings", kn: "‡≤∏‡≥Ü‡≤ü‡≥ç‡≤ü‡≤ø‡≤Ç‡≤ó‡≥ç‚Äå‡≤ó‡≤≥‡≥Å" },
      profileName: { en: "Name: User", kn: "‡≤π‡≥Ü‡≤∏‡≤∞‡≥Å: ‡≤¨‡≤≥‡≤ï‡≥Ü‡≤¶‡≤æ‡≤∞" },
      darkTheme: { en: "Dark Theme", kn: "‡≤°‡≤æ‡≤∞‡≥ç‡≤ï‡≥ç ‡≤•‡≥Ä‡≤Æ‡≥ç" },
    };
    

    document.addEventListener('DOMContentLoaded', () => {
      if (localStorage.getItem('theme') === 'dark') {
        document.body.classList.add('dark');
        document.getElementById('themeToggle').checked = true;
      }
      if (currentLang === 'kn') {
        document.getElementById('langToggle').checked = true;
        switchLanguage(true);
      }
      loadProducts();
    });

    function toggleSettings() {
      document.getElementById('settingsPanel').classList.toggle('hidden');
    }

    function toggleTheme() {
      const isDark = document.getElementById('themeToggle').checked;
      document.body.classList.toggle('dark', isDark);
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    }

    function switchLanguage(forceKn) {
      const isKn = forceKn || document.getElementById('langToggle').checked;
      currentLang = isKn ? 'kn' : 'en';
      localStorage.setItem('lang', currentLang);

      document.getElementById('title').innerText = currentLang === 'kn' ? "‡≤â‡≤§‡≥ç‡≤™‡≤®‡≥ç‡≤® ‡≤™‡≤ü‡≥ç‡≤ü‡≤ø‡≤ï‡≥Ü" : "Product Table";
      document.getElementById('selectDateLabel').innerText = translations.selectDate[currentLang];
      document.getElementById('thProduct').innerText = translations.productHeader[currentLang];
      document.getElementById('thQuantity').innerText = translations.quantityHeader[currentLang];
      document.getElementById('thPrice').innerText = translations.priceHeader[currentLang];
      document.getElementById('settingsTitle').innerText = translations.settingsTitle[currentLang];
      document.getElementById('profileName').innerText = translations.profileName[currentLang];
      document.getElementById('themeLabel').innerText = translations.darkTheme[currentLang];
      document.getElementById('langLabel').innerText = currentLang === 'kn' ? 'ENG' : '‡≤ï‡≤®‡≥ç‡≤®‡≤°';

      loadProducts();
    }

    function loadProducts() {
      const date = document.getElementById('datePicker').value;
      fetch('/get_products', {
        method: 'POST',
        headers: {'Content-Type': 'application/x-www-form-urlencoded'},
        body: `date=${date}`
      })
      .then(res => res.json())
      .then(data => {
        const tbody = document.querySelector('tbody');
        tbody.innerHTML = '';
        if (data.length === 0) {
          tbody.innerHTML = `<tr><td colspan="3">${translations.noRecords[currentLang]}</td></tr>`;
        } else {
          data.forEach(row => {
            const prod = row[1];
            const name = productNames[prod] ? productNames[prod][currentLang] : prod;
            tbody.innerHTML += `<tr><td>${name}</td><td>${row[2]}</td><td>‚Çπ ${row[3]}</td></tr>`;
          });
        }
      });
    }
  </script>
</body>
</html>
